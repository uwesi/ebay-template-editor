<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>eBay Template Editor ‚Äì Final</title>

<style>
/* ========= EDITOR UI (nur GitHub) ========= */
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;color:#111}
.app{max-width:1200px;margin:12px auto;padding:12px}
header{display:flex;flex-wrap:wrap;gap:8px;justify-content:space-between;align-items:center;margin-bottom:12px}
h1{font-size:1rem;margin:0}
.controls{display:flex;gap:6px;flex-wrap:wrap}
button,input,textarea{
  padding:8px;border-radius:8px;border:1px solid #dde6ef;font-size:0.9rem
}
button{cursor:pointer}
.primary{background:#0b79ff;color:#fff;border:none}
.grid{display:grid;gap:12px}
@media(min-width:960px){.grid{grid-template-columns:420px 1fr}}
.card{background:#fff;padding:12px;border-radius:10px;border:1px solid #e6eef6}
label{font-size:0.85rem}
textarea{width:100%;min-height:80px;resize:vertical}
input{width:100%}
.small{font-size:0.8rem;color:#555}

/* ========= PREVIEW ========= */
.preview-desktop iframe{width:100%}
.preview-mobile{display:flex;justify-content:center}
.preview-mobile iframe{
  width:375px;
  max-width:100%;
  border:2px solid #d1d5db;
  border-radius:18px;
  background:#fff;
}
iframe{height:720px;border:1px solid #e6eef6;border-radius:6px}
</style>
</head>

<body>
<div class="app">

<header>
  <h1>eBay Template Editor (Final)</h1>
  <div class="controls">
    <button id="viewDesktop">üñ• Desktop</button>
    <button id="viewMobile">üì± Mobile</button>
    <button id="copyStandard">HTML kopieren</button>
    <button id="copyInline" class="primary">HTML kopieren (eBay-sicher)</button>
  </div>
</header>

<div class="grid">

<!-- ===== EDITOR ===== -->
<div class="card">
  <label>Titel
    <input id="title" value="eBay Template 2026 Vorlage + Online Editor | Mobil optimiert | Privatverk√§ufer">
  </label>

  <label>Lead
    <textarea id="lead">üöÄ Verkaufe wie ein Profi ‚Äì Mehr Erfolg f√ºr deine eBay-Anzeigen!</textarea>
  </label>

  <label>Beschreibung
    <textarea id="description">Professionelles eBay-Template inklusive Online-Editor ‚Äì ideal f√ºr Privatverk√§ufer.</textarea>
  </label>

  <label>Badges (eine Zeile = ein Badge)
    <textarea id="badges">üì¶ Schneller Versand
ü§ù Privatverkauf
‚≠ê Gepr√ºfte Qualit√§t</textarea>
  </label>

  <label>Lieferumfang (Checkliste)
    <textarea id="delivery">Kauf: Link zum Editor
Eingabe: Daten eintragen
Kopieren: Code kopieren
Einf√ºgen: In eBay HTML-Editor</textarea>
  </label>

  <label>Details (Label:Wert)
    <textarea id="details">Zustand:Neu
Abholort:Nicht zutreffend</textarea>
  </label>

  <label>Rechtshinweis
    <textarea id="legal">Der Verkauf erfolgt unter Ausschluss jeglicher Sachmangelhaftung. Keine R√ºcknahme.</textarea>
  </label>

  <label class="small">
    <input type="checkbox" id="entities" checked> Umlaute in HTML-Entities umwandeln
  </label>
</div>

<!-- ===== PREVIEW ===== -->
<div class="card preview-desktop" id="previewWrap">
  <iframe id="preview"></iframe>
</div>

</div>
</div>

<script>
/* ========= HELPERS ========= */
const $=id=>document.getElementById(id);
const ent=s=>s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
 .replace(/√Ñ/g,'&Auml;').replace(/√§/g,'&auml;')
 .replace(/√ñ/g,'&Ouml;').replace(/√∂/g,'&ouml;')
 .replace(/√ú/g,'&Uuml;').replace(/√º/g,'&uuml;')
 .replace(/√ü/g,'&szlig;');
const lines=v=>v.split('\n').map(x=>x.trim()).filter(Boolean);

/* ========= BUILD HTML ========= */
function buildHtml(inline=false){
 const c=$('entities').checked;
 const t=c?ent($('title').value):$('title').value;
 const lead=c?ent($('lead').value):$('lead').value;
 const desc=c?ent($('description').value):$('description').value;
 const legal=c?ent($('legal').value):$('legal').value;

 const badges=lines($('badges').value).map(b=>`<span>${c?ent(b):b}</span>`).join('');
 const delivery=lines($('delivery').value).map(d=>`
 <div class="row"><span class="check">‚úì</span><span>${c?ent(d):d}</span></div>`).join('');
 const details=lines($('details').value).map(l=>{
  const p=l.split(':');
  return `<tr><td><b>${c?ent(p[0]):p[0]}</b></td><td>${c?ent(p.slice(1).join(':')):p.slice(1).join(':')}</td></tr>`;
 }).join('');

 let style=inline?'':`
<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
.wrap{max-width:850px;margin:10px auto;background:#fff;border:1px solid #ddd;border-radius:8px}
.hero{background:#232f3e;color:#fff;padding:25px;text-align:center}
.badges{background:#37475a;color:#fff;display:flex;justify-content:space-around;padding:10px;font-size:13px;flex-wrap:wrap}
.content{padding:25px}
.row{display:flex;gap:10px;border-bottom:1px solid #eee;padding:5px 0}
.check{color:#2e7d32;font-weight:bold}
.notice{font-size:12px;color:#666;border-top:1px dashed #ddd;padding-top:12px;margin-top:20px}
table{width:100%;border-collapse:collapse}
td{border:1px solid #eee;padding:10px}
</style>`;

 let html=`
<!doctype html><html><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">${style}
</head><body>
<div class="wrap">
<div class="hero"><h1>${t}</h1></div>
<div class="badges">${badges}</div>
<div class="content">
<p>${lead}<br><br>${desc}</p>
<h3>Lieferumfang</h3>${delivery}
<h3>Details & Zustand</h3><table>${details}</table>
<div class="notice"><b>Rechtlicher Hinweis:</b> ${legal}</div>
</div></div></body></html>`;

 if(inline){
  html=html.replace('class="wrap"','style="max-width:850px;margin:10px auto;background:#fff;border:1px solid #ddd;border-radius:8px"')
   .replace('class="hero"','style="background:#232f3e;color:#fff;padding:25px;text-align:center"')
   .replace('class="badges"','style="background:#37475a;color:#fff;display:flex;justify-content:space-around;padding:10px;font-size:13px;flex-wrap:wrap"')
   .replace(/class="row"/g,'style="display:flex;gap:10px;border-bottom:1px solid #eee;padding:5px 0"')
   .replace(/class="check"/g,'style="color:#2e7d32;font-weight:bold"')
   .replace('<table>','<table style="width:100%;border-collapse:collapse">')
   .replace(/<td>/g,'<td style="border:1px solid #eee;padding:10px">')
   .replace('class="notice"','style="font-size:12px;color:#666;border-top:1px dashed #ddd;padding-top:12px;margin-top:20px"');
 }
 return html;
}

/* ========= PREVIEW ========= */
function update(){ $('preview').srcdoc=buildHtml(false); }
update();
document.querySelectorAll('input,textarea').forEach(e=>e.addEventListener('input',update));

/* ========= COPY ========= */
$('copyStandard').onclick=()=>{navigator.clipboard.writeText(buildHtml(false));alert('HTML kopiert');};
$('copyInline').onclick=()=>{navigator.clipboard.writeText(buildHtml(true));alert('eBay-sicheres HTML kopiert');};

/* ========= AUTO MOBILE PREVIEW ========= */
const wrap=$('previewWrap');
let manual=false;
function auto(){
 if(manual) return;
 if(window.innerWidth<900){
  wrap.classList.add('preview-mobile');
  wrap.classList.remove('preview-desktop');
 }else{
  wrap.classList.add('preview-desktop');
  wrap.classList.remove('preview-mobile');
 }
}
auto();
window.addEventListener('resize',auto);
$('viewDesktop').onclick=()=>{manual=true;wrap.classList.add('preview-desktop');wrap.classList.remove('preview-mobile');};
$('viewMobile').onclick=()=>{manual=true;wrap.classList.add('preview-mobile');wrap.classList.remove('preview-desktop');};
</script>
</body>
</html>
